#!/usr/bin/env python3
"""
Apply the given migration.
"""

import argparse
import asyncio

from weather_station import db
from weather_station.accounts.queries import create_account

parser = argparse.ArgumentParser(description="Execute background tasks")
parser.add_argument("--username", "-u", help="Account username", required=True)
parser.add_argument("--password", "-p", help="Account password", required=True)

args = parser.parse_args()


@db.setup()
async def main(username: str, password: str) -> None:
    await create_account(username=username, password=password)


try:
    asyncio.run(main(args.username, args.password))
except KeyboardInterrupt:
    pass
