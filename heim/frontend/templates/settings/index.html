{% extends "settings/layout.html" %}

{% block content %}
<hgroup>
  <h2>Settings Overview</h2>
  <p>Manage your home monitoring configuration.</p>
</hgroup>

<div class="grid">
  <article>
    <header>Locations</header>
    <p>
      {% if locations %}
        {{ locations|length }} location{% if locations|length != 1 %}s{% endif %} configured
      {% else %}
        No locations configured
      {% endif %}
    </p>
    <ul>
      {% for location in locations[:3] %}
        <li>{{ location.name }}</li>
      {% endfor %}
      {% if locations|length > 3 %}
        <li><small>and {{ locations|length - 3 }} more...</small></li>
      {% endif %}
    </ul>
    <footer>
      <a href="/settings/locations/" role="button" class="outline">Manage Locations</a>
    </footer>
  </article>

  {% if netatmo_configured %}
  <article>
    <header>Netatmo Integration</header>
    <p>
      {% if netatmo_account %}
        <span class="badge badge-success">Connected</span>
      {% else %}
        Not connected
      {% endif %}
    </p>
    {% if netatmo_account %}
      <p><small>Token expires: {{ netatmo_account.expires_at.strftime('%Y-%m-%d %H:%M') }}</small></p>
    {% endif %}
    <footer>
      <a href="/settings/netatmo/" role="button" class="outline">
        {% if netatmo_account %}Manage Netatmo{% else %}Connect Netatmo{% endif %}
      </a>
    </footer>
  </article>
  {% endif %}
</div>
{% endblock %}
